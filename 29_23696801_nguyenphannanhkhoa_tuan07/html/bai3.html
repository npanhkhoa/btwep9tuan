<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài 2 | tuần 7 | xử lý dữ liệu JS</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.7.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script>
        // JavaScript
        let sp1 = {hinhanh: "../image/car1.jpg", dongia: 100, soluong: 10};
        let sp2 = {hinhanh: "../image/car2.jpg", dongia: 200, soluong: 20};
        let sp3 = {hinhanh: "../image/car3.jpg", dongia: 300, soluong: 30};
        let sp4 = {hinhanh: "../image/car4.jpg", dongia: 400, soluong: 40};
        let sp5 = {hinhanh: "../image/car5.jpg", dongia: 500, soluong: 50};
        let sp6 = {hinhanh: "../image/car6.jpg", dongia: 400, soluong: 40};
        let sp7 = {hinhanh: "../image/car7.jpg", dongia: 300, soluong: 30};
        let sp8 = {hinhanh: "../image/car8.jpg", dongia: 200, soluong: 20};
        let sp9 = {hinhanh: "../image/car9.jpg", dongia: 100, soluong: 10};
        let sp10 = {hinhanh: "../image/car10.jpg", dongia: 200, soluong: 20};
        let sp11 = {hinhanh: "../image/car11.jpg", dongia: 300, soluong: 30};
        let sp12 = {hinhanh: "../image/car12.jpg", dongia: 400, soluong: 40};
        let sp13 = {hinhanh: "../image/car13.jpg", dongia: 500, soluong: 50};

        let dssp = [sp1, sp2, sp3, sp4, sp5, sp6, sp7, sp8, sp9, sp10, sp11, sp12, sp13];

        let i = 0;

        function napSanPham(sanpham, index) {
            let tbl = document.getElementById("myTable");
            let thanhtien = sanpham.dongia * sanpham.soluong;
            let row = "<tr><td>" + (++i) + "</td><td><img width='200' src=" + sanpham.hinhanh + "></td><td>" + sanpham.dongia + "</td><td contenteditable='true' onkeyup='tinhTongTien();'>" + sanpham.soluong + "</td><td>" + thanhtien + "</td></tr>";
            tbl.insertAdjacentHTML('beforeend', row);
        }

        function tinhTongTien() {
            let tbl = document.getElementById("myTable");
            let tongtien = 0;
            for (let index = 0; index < tbl.rows.length; index++) {
                let dongia = parseInt(tbl.rows[index].cells[2].textContent);
                let soluong = parseInt(tbl.rows[index].cells[3].textContent);
                let thanhtien = dongia * soluong;
                tbl.rows[index].cells[4].textContent = thanhtien;
                tongtien += thanhtien;
            }
            document.getElementById("lb-TongTien").textContent = tongtien;
        }

        window.onload = function () {
            dssp.forEach(napSanPham);
            tinhTongTien();
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="row">
            <img src="../image/banner_car.jpg" alt="banner_car">
        </div>
        <div class="row">
            <div class="col-md-12">
                <table class="table table-striped table-border table-hover">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Hình ảnh</th>
                            <th>Đơn giá</th>
                            <th>Số lượng</th>
                            <th>Thành tiền</th>
                        </tr>
                    </thead>
                    <tbody id="myTable">
                        <!-- Sẽ được tạo động từ JavaScript -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td class="font-weight-bold">Tổng thành tiền</td>
                            <td class="font-weight-bold"><label id="lb-TongTien"></label></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</body>
</html>
